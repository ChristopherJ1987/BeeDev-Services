{% extends "base.html" %}
{% load i18n static %}

{% block content %}

  <div class="login">
    <h1 class="title">Welcome to the <span class="altTitle">BeeDev Portal</span></h1>

    {# built-in AuthenticationForm from LoginView #}
    {% if form.errors %}
      <p class="errornote">
        {% translate "Please correct the error below." %}
        {% if form.errors|length > 1 %}{% translate " Please correct the errors below." %}{% endif %}
      </p>
    {% endif %}

    <form class="login-form" method="post" action="">
      {% csrf_token %}
      <p>Clients & Employees: sign in below.</p>

      <div class="form-row input_box">
        {{ form.username }}
        {{ form.username.errors }}
        <span class="icon" aria-hidden="true">üìß</span>
      </div>

      <div class="form-row input_box password-field">
        {{ form.password }}
        {{ form.password.errors }}
        <button
          type="button"
          class="show-pass"
          aria-controls="id_password"
          aria-label="Show password"
          aria-pressed="false"
          onclick="togglePass()"
        >üëÅ</button>
      </div>


      {# preserve ?next=... if present #}
      <input type="hidden" name="next" value="{{ next }}">

      {{ form.non_field_errors }}

      <div class="submit-row">
        <button type="submit" class="btn-login">{% translate "Log in" %}</button>
      </div>
    </form>

    <p class="login-help">
      Employees can open <a href="/admin/">Admin</a> after logging in (no second login needed).
    </p>
  </div>


<script>
function togglePass() {
  const input = document.getElementById('id_password');
  if (!input) return;
  input.type = input.type === 'password' ? 'text' : 'password';
}
</script>
{% endblock content %}
