{% load static %}
<!DOCTYPE html>
<html lang="en">
<body>
    {% block marquee %} 
    {% if marquee_notice %}
        <div id="marquee" class="marquee marquee-{{ marquee_notice.severity|lower }}" data-ann-slug="{{ marquee_notice.slug }}">
            <div class="marquee__track">
                {% if marquee_notice.title %}
                    <strong>{{ marquee_notice.title }}:</strong>
                {% endif %} 
                {{ marquee_notice.message_html|safe }}
                {% if marquee_notice.link_url %} 
                    &nbsp;<a href="{{ marquee_notice.link_url }}" target="_blank" rel="noopener">{{ marquee_notice.link_text|default:"Details" }}</a>
                {% endif %}
            </div>
            {% if marquee_notice.dismissible %}
                <button class="marquee__close" type="button" aria-label="Dismiss">&times;</button>
            {% endif %}
        </div>
    <script>
        (function () {
            const el = document.getElementById("marquee");
            if (!el) return;
            const slug = el.dataset.annSlug;
            if (slug && localStorage.getItem("dismissed:" + slug)) {
            el.style.display = "none";
            return;
            }
            const btn = el.querySelector(".marquee__close");
            if (btn)
            btn.addEventListener("click", function () {
                if (slug) localStorage.setItem("dismissed:" + slug, "1");
                el.style.display = "none";
            });
        })();
    </script>
    {% endif %} 
    {% endblock marquee %}
  </body>
</html>
